[gd_scene load_steps=27 format=3 uid="uid://dcvptnjovyoxq"]

[ext_resource type="Script" uid="uid://dmbnbok4t8mwu" path="res://Scripts/World/Caer_Sidi/Caer_Sidi.gd" id="1_k5su7"]
[ext_resource type="Script" uid="uid://c1x8tjd2ts6cw" path="res://Scripts/camera_manager.gd" id="2_t8dgu"]
[ext_resource type="Script" uid="uid://dmk4w3w5ypuvx" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_2d.gd" id="3_alk0r"]
[ext_resource type="Script" uid="uid://42jdkjn6i73p" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="4_5vij2"]
[ext_resource type="Texture2D" uid="uid://4pwqu7743yv" path="res://Assets/Environment/Caer/CaerSidi/back_test.png" id="5_x0pia"]
[ext_resource type="Texture2D" uid="uid://7rtgjvbnd0uc" path="res://Assets/Environment/Caer/CaerSidi/front.png" id="9_y8608"]
[ext_resource type="Texture2D" uid="uid://yrsjockwna2g" path="res://Assets/Environment/Caer/CaerSidi/frame.png" id="10_qj3dh"]
[ext_resource type="Script" uid="uid://bhmfqlhth6d1v" path="res://Scenes/door.gd" id="10_rbuyk"]
[ext_resource type="PackedScene" uid="uid://dqm8to35jixto" path="res://Scenes/Player/player.tscn" id="11_v56gx"]
[ext_resource type="Script" uid="uid://cx2qyeyx2ynf" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="16_eexpp"]
[ext_resource type="Texture2D" uid="uid://dk6y1boqw25rp" path="res://Assets/UI/tempE.png" id="17_mq7ld"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_g1cio"]
size = Vector2(3067, 2072)

[sub_resource type="Resource" id="Resource_hfi36"]
script = ExtResource("4_5vij2")
duration = 1.0
transition = 1
ease = 2

[sub_resource type="Resource" id="Resource_tu8bs"]
script = ExtResource("4_5vij2")
duration = 1.0
transition = 1
ease = 2

[sub_resource type="RectangleShape2D" id="RectangleShape2D_x3u7g"]
size = Vector2(732, 399)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dkkmo"]
size = Vector2(789, 2037)

[sub_resource type="Resource" id="Resource_gjqif"]
script = ExtResource("4_5vij2")
duration = 1.0
transition = 0
ease = 2

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5g4pg"]
size = Vector2(791, 625)

[sub_resource type="Resource" id="Resource_lvwi7"]
script = ExtResource("4_5vij2")
duration = 1.0
transition = 0
ease = 2

[sub_resource type="RectangleShape2D" id="RectangleShape2D_4ehcg"]
size = Vector2(87, 139)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_csn40"]
size = Vector2(49, 1987.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ymsr5"]
size = Vector2(190.5, 22.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jssfv"]
size = Vector2(92, 14)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_flxxk"]
size = Vector2(103, 21)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_lvwi7"]
size = Vector2(101.5, 321.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_v8fcr"]
size = Vector2(48, 150)

[node name="Caer_Sidi" type="Node2D" node_paths=PackedStringArray("player")]
script = ExtResource("1_k5su7")
player = NodePath("Player")

[node name="CameraManager" type="Node" parent="." node_paths=PackedStringArray("player", "Camera_Zone0", "Camera_Zone1", "Camera_Zone2", "Camera_Zone3")]
script = ExtResource("2_t8dgu")
player = NodePath("../Player")
Camera_Zone0 = NodePath("CameraNodes/Zone_0/Zone_0")
Camera_Zone1 = NodePath("CameraNodes/Zone_1/Zone_1")
Camera_Zone2 = NodePath("CameraNodes/zone_2/Zone_2")
Camera_Zone3 = NodePath("CameraNodes/zone_3/Zone_3")

[node name="CameraNodes" type="StaticBody2D" parent="CameraManager"]

[node name="Zone_0" type="Area2D" parent="CameraManager/CameraNodes"]
position = Vector2(4528, 1350)
collision_mask = 3

[node name="CollisionShape2D" type="CollisionShape2D" parent="CameraManager/CameraNodes/Zone_0"]
position = Vector2(2984.5, 2187)
shape = SubResource("RectangleShape2D_g1cio")

[node name="Zone_0" type="Node2D" parent="CameraManager/CameraNodes/Zone_0"]
position = Vector2(3000, 2288)
script = ExtResource("3_alk0r")
zoom = Vector2(0.4, 0.4)
tween_resource = SubResource("Resource_hfi36")
draw_limits = true

[node name="Zone_1" type="Area2D" parent="CameraManager/CameraNodes"]
position = Vector2(9400, 3481)
collision_mask = 2

[node name="Zone_1" type="Node2D" parent="CameraManager/CameraNodes/Zone_1"]
position = Vector2(-27, 546)
script = ExtResource("3_alk0r")
zoom = Vector2(1.5, 1.5)
tween_resource = SubResource("Resource_tu8bs")
draw_limits = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="CameraManager/CameraNodes/Zone_1"]
position = Vector2(-10, 545.5)
shape = SubResource("RectangleShape2D_x3u7g")

[node name="zone_2" type="Area2D" parent="CameraManager/CameraNodes"]
position = Vector2(1648, 1904)
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="CameraManager/CameraNodes/zone_2"]
position = Vector2(8599.5, 1348.5)
shape = SubResource("RectangleShape2D_dkkmo")

[node name="Zone_2" type="Node2D" parent="CameraManager/CameraNodes/zone_2" node_paths=PackedStringArray("follow_target")]
top_level = true
position = Vector2(10242.4, 4050.57)
script = ExtResource("3_alk0r")
follow_mode = 2
follow_target = NodePath("../../../../Player")
zoom = Vector2(1.4, 1.4)
tween_resource = SubResource("Resource_gjqif")
draw_limits = true
limit_left = 9831
limit_right = 10673
limit_bottom = 4282
metadata/_custom_type_script = "uid://dmk4w3w5ypuvx"

[node name="zone_3" type="Area2D" parent="CameraManager/CameraNodes"]
position = Vector2(2702, 1294)
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="CameraManager/CameraNodes/zone_3"]
position = Vector2(6716.5, 1982.5)
shape = SubResource("RectangleShape2D_5g4pg")

[node name="Zone_3" type="Node2D" parent="CameraManager/CameraNodes/zone_3"]
position = Vector2(6721, 1984)
script = ExtResource("3_alk0r")
zoom = Vector2(1.3, 1.1)
tween_resource = SubResource("Resource_lvwi7")
draw_limits = true
metadata/_custom_type_script = "uid://dmk4w3w5ypuvx"

[node name="EnvironmentBack" type="Sprite2D" parent="."]

[node name="BackTest" type="Sprite2D" parent="EnvironmentBack"]
position = Vector2(7442, 3030)
texture = ExtResource("5_x0pia")

[node name="CaerDoorDect" type="Area2D" parent="." node_paths=PackedStringArray("int_UI")]
visible = false
position = Vector2(9755, 4197)
collision_mask = 3
script = ExtResource("10_rbuyk")
int_UI = NodePath("../TempE")
next_scene = &"Cauldron_room"
current_scene = &"Caer_Sidi"
state_locked = &"Chained_idle"
state_unlocked = &"Broken_idle"

[node name="CollisionShape2D" type="CollisionShape2D" parent="CaerDoorDect"]
position = Vector2(-373.5, -89.5)
shape = SubResource("RectangleShape2D_4ehcg")

[node name="TempE" type="Sprite2D" parent="."]
visible = false
position = Vector2(9380, 4004)
scale = Vector2(0.3, 0.301)
texture = ExtResource("17_mq7ld")

[node name="Collisions" type="StaticBody2D" parent="."]
position = Vector2(1, 0)
collision_mask = 3

[node name="CollisionPolygon2D5" type="CollisionPolygon2D" parent="Collisions"]
position = Vector2(7441, 3030)
polygon = PackedVector2Array(3105, 399, 3062, 400, 3051, 412, 2990, 410, 2990, 462, 3013, 470, 3021, 506, 3063, 512, 3132, 518, 3179, 521, 3171, -42, 3141, -152, 3141, 260, 3131, 312, 3124, 344, 3120, 366)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="Collisions"]
polygon = PackedVector2Array(6553, 3148, 6553, 3516, 7272, 3520, 7270, 3539, 7291, 3555, 6485, 3554, 6454, 3191, 7108, 2642, 8582, 2709, 8705, 3099, 8631, 3537, 8370, 3557, 7755, 3561, 7771, 3536, 8497, 3524, 8534, 3098, 7748, 2795, 6940, 2977)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Collisions"]
polygon = PackedVector2Array(7010, 4213, 7038, 4190, 7236, 4193, 7293, 4245, 7813, 4251, 7866, 4200, 8820, 4201, 9054, 4192, 9678, 4195, 10644, 4198, 10646, 4294, 9071, 4294, 7897, 4273, 7899, 4328, 7218, 4328, 7209, 4256, 7080, 4254)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Collisions"]
position = Vector2(10629.5, 3222.75)
shape = SubResource("RectangleShape2D_csn40")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Collisions"]
position = Vector2(10500, 3939)
shape = SubResource("RectangleShape2D_ymsr5")
one_way_collision = true

[node name="CollisionShape2D4" type="CollisionShape2D" parent="Collisions"]
position = Vector2(10243, 3550)
shape = SubResource("RectangleShape2D_jssfv")
one_way_collision = true

[node name="CollisionShape2D5" type="CollisionShape2D" parent="Collisions"]
position = Vector2(10267, 3814)
shape = SubResource("RectangleShape2D_jssfv")
one_way_collision = true

[node name="CollisionShape2D3" type="CollisionShape2D" parent="Collisions"]
position = Vector2(9955, 3561)
shape = SubResource("RectangleShape2D_ymsr5")
one_way_collision = true

[node name="CollisionPolygon2D3" type="CollisionPolygon2D" parent="Collisions"]
polygon = PackedVector2Array(10408, 3925, 10095, 4148, 10122, 4141, 10430, 3934)
one_way_collision = true

[node name="CollisionPolygon2D4" type="CollisionPolygon2D" parent="Collisions"]
polygon = PackedVector2Array(10044, 3574, 10057, 3577, 10064, 3604, 10095, 3605, 10099, 3635, 10130, 3637, 10136, 3674, 10183, 3675, 10180, 3707, 10184, 3736, 10196, 3751, 10209, 3790, 10220, 3805, 10220, 3811, 9970, 3690, 9945, 3601, 10022, 3582, 10022, 3582)

[node name="CollisionPolygon2D6" type="CollisionPolygon2D" parent="Collisions"]
polygon = PackedVector2Array(9965, 3060, 10255, 3068, 10298, 3145, 10351, 3150, 10333, 3183, 10261, 3209, 10085, 3188, 9968, 3209, 9965, 3070)

[node name="CollisionPolygon2D7" type="CollisionPolygon2D" parent="Collisions"]
polygon = PackedVector2Array(10512, 2685, 9986, 2689, 9993, 2715, 10092, 2715, 10514, 2716)
one_way_collision = true

[node name="CollisionPolygon2D8" type="CollisionPolygon2D" parent="Collisions"]
polygon = PackedVector2Array(9858, 3553, 9771, 3537, 9043, 3546, 9007, 3529, 9005, 3314, 8942, 3312, 8946, 3632, 9841, 3616)

[node name="CollisionShape2D6" type="CollisionShape2D" parent="Collisions"]
position = Vector2(10230.5, 2930.5)
shape = SubResource("RectangleShape2D_flxxk")
one_way_collision = true

[node name="Player" parent="." instance=ExtResource("11_v56gx")]
position = Vector2(7751, 4247)
scale = Vector2(0.3, 0.3)

[node name="EnvironmentFront" type="Sprite2D" parent="."]

[node name="Front" type="Sprite2D" parent="EnvironmentFront"]
position = Vector2(7443, 3030)
texture = ExtResource("9_y8608")

[node name="Frame" type="Sprite2D" parent="EnvironmentFront"]
position = Vector2(7446, 3027)
texture = ExtResource("10_qj3dh")

[node name="PhantomCameraHost" type="Node" parent="."]
process_priority = 300
process_physics_priority = 300
script = ExtResource("16_eexpp")

[node name="teleport to upper" type="Area2D" parent="."]
position = Vector2(8987, 3318)
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="teleport to upper"]
position = Vector2(66, 70)
shape = SubResource("RectangleShape2D_lvwi7")

[node name="teleport_from_upper" type="Area2D" parent="."]
position = Vector2(8435, 3582)
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="teleport_from_upper"]
position = Vector2(35, -133)
shape = SubResource("RectangleShape2D_v8fcr")

[node name="Marker2D" type="Marker2D" parent="."]
position = Vector2(7749, 4231)

[connection signal="body_entered" from="CameraManager/CameraNodes/Zone_0" to="CameraManager" method="_on_zone_01_body_entered"]
[connection signal="body_entered" from="CameraManager/CameraNodes/Zone_1" to="CameraManager" method="_on_zone_1_body_entered"]
[connection signal="body_entered" from="CameraManager/CameraNodes/zone_2" to="CameraManager" method="_on_zone_2_body_entered"]
[connection signal="body_entered" from="CameraManager/CameraNodes/zone_3" to="CameraManager" method="_on_zone_3_body_entered"]
[connection signal="body_entered" from="CaerDoorDect" to="CaerDoorDect" method="_on_body_entered"]
[connection signal="body_exited" from="CaerDoorDect" to="CaerDoorDect" method="_on_body_exited"]
[connection signal="body_entered" from="teleport to upper" to="." method="_on_teleport_to_upper_body_entered"]
[connection signal="body_entered" from="teleport_from_upper" to="." method="_on_teleport_from_upper_body_entered"]
